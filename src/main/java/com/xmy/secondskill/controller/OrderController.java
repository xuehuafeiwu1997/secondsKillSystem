package com.xmy.secondskill.controller;import com.xmy.secondskill.entity.OrderInfo;import com.xmy.secondskill.entity.User;import com.xmy.secondskill.result.CodeMsg;import com.xmy.secondskill.result.Result;import com.xmy.secondskill.service.GoodsService;import com.xmy.secondskill.service.OrderService;import com.xmy.secondskill.vo.GoodsVo;import com.xmy.secondskill.vo.OrderDetailVo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.ResponseBody;/** * @author xmy * @date 2021/3/29 3:31 下午 */@Controller@RequestMapping("/order")public class OrderController {    @Autowired    private OrderService orderService;    @Autowired    private GoodsService goodsService;    @RequestMapping("/detail")    @ResponseBody    public Result<OrderDetailVo> info(Model model, User user, @RequestParam("orderId") long orderId) {        if(user == null) {            return Result.error(CodeMsg.SESSION_ERROR);        }        OrderInfo order = orderService.getOrderById(orderId);        if(order == null) {            return Result.error(CodeMsg.ORDER_NOT_EXIST);        }        long goodsId = order.getGoodsId();        GoodsVo goods = goodsService.getGoodsVoByGoodsId(goodsId);        OrderDetailVo vo = new OrderDetailVo();        vo.setOrder(order);        vo.setGoods(goods);        return Result.success(vo);    }}